{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "properties": {
    "Nurse": {
      "$ref": "#/definitions/Nurse"
    }
  },
  "required": ["Nurse"],
  "title": "Nurse",
  "definitions": {
    "Nurse": {
      "$id": "#/properties/Nurse",
      "type": "object",
      "title": "Nurse Schema",
      "description": "Egyptian Healthcare Professional - Nurse Registration",
      "required": [
        "fullName",
        "nationalId",
        "nursingLicenseNumber",
        "nursingCategory",
        "email",
        "mobile"
      ],
      "properties": {
        "fullName": {
          "type": "string",
          "title": "Full Name"
        },
        "fullNameArabic": {
          "type": "string",
          "title": "Full Name (Arabic)"
        },
        "nationalId": {
          "type": "string",
          "title": "National ID",
          "pattern": "^[0-9]{14}$"
        },
        "nursingLicenseNumber": {
          "type": "string",
          "title": "Nursing License Number"
        },
        "nursingCategory": {
          "type": "string",
          "title": "Nursing Category",
          "enum": [
            "Registered Nurse (RN)",
            "Licensed Practical Nurse (LPN)",
            "Nurse Practitioner (NP)",
            "Clinical Nurse Specialist",
            "Certified Nurse Midwife",
            "Certified Registered Nurse Anesthetist",
            "Nursing Assistant",
            "Other"
          ]
        },
        "specialization": {
          "type": "string",
          "title": "Specialization",
          "enum": [
            "General Nursing",
            "Pediatric Nursing",
            "Geriatric Nursing",
            "Critical Care",
            "Emergency Nursing",
            "Surgical Nursing",
            "Oncology Nursing",
            "Psychiatric Nursing",
            "Community Health",
            "Obstetric Nursing",
            "Cardiac Nursing",
            "Dialysis Nursing",
            "Other"
          ]
        },
        "qualification": {
          "type": "string",
          "title": "Highest Qualification",
          "enum": [
            "Diploma in Nursing",
            "BSc Nursing",
            "MSc Nursing",
            "PhD Nursing",
            "Other"
          ]
        },
        "qualificationYear": {
          "type": "string",
          "title": "Year of Qualification",
          "pattern": "^[0-9]{4}$"
        },
        "institution": {
          "type": "string",
          "title": "Educational Institution"
        },
        "email": {
          "type": "string",
          "format": "email",
          "title": "Email Address"
        },
        "mobile": {
          "type": "string",
          "title": "Mobile Number",
          "pattern": "^\\+?[0-9]{10,15}$"
        },
        "address": {
          "type": "object",
          "title": "Address",
          "properties": {
            "street": {"type": "string"},
            "city": {"type": "string"},
            "governorate": {"type": "string"},
            "postalCode": {"type": "string"}
          }
        },
        "currentEmployer": {
          "type": "string",
          "title": "Current Employer/Hospital"
        },
        "employmentType": {
          "type": "string",
          "title": "Employment Type",
          "enum": ["Full-time", "Part-time", "Contract", "Freelance"]
        },
        "yearsOfExperience": {
          "type": "integer",
          "title": "Years of Experience",
          "minimum": 0
        },
        "licenseExpiryDate": {
          "type": "string",
          "format": "date",
          "title": "License Expiry Date"
        },
        "registrationDate": {
          "type": "string",
          "format": "date",
          "title": "Registration Date"
        },
        "status": {
          "type": "string",
          "title": "Registration Status",
          "enum": ["Active", "Inactive", "Suspended", "Pending"],
          "default": "Pending"
        },
        "profilePhoto": {
          "type": "string",
          "title": "Profile Photo URL"
        }
      }
    }
  },
  "_osConfig": {
    "privateFields": ["nationalId", "mobile", "address"],
    "signedFields": ["fullName", "nursingLicenseNumber", "nursingCategory"],
    "indexFields": ["nursingLicenseNumber", "nationalId", "email", "nursingCategory", "status"],
    "uniqueIndexFields": ["nursingLicenseNumber", "nationalId", "email"],
    "systemFields": ["osCreatedAt", "osUpdatedAt", "osCreatedBy", "osUpdatedBy"],
    "roles": ["Nurse"],
    "inviteRoles": ["Admin"],
    "ownershipAttributes": [
      {
        "email": "/email",
        "mobile": "/mobile",
        "userId": "/osOwner"
      }
    ],
    "attestationPolicies": [
      {
        "name": "nurseVerification",
        "conditions": "(ATTESTOR#$.nursingLicenseNumber#.contains(REQUESTER#$.nursingLicenseNumber#))",
        "type": "MANUAL",
        "attestorPlugin": "did:internal:ClaimPluginActor?entity=Admin"
      }
    ],
    "credentialTemplate": {
      "@context": [
        "https://www.w3.org/2018/credentials/v1",
        "https://healthflow.eg/credentials/v1"
      ],
      "type": ["VerifiableCredential", "NurseCredential"],
      "issuer": "did:healthflow:registry",
      "issuanceDate": "{{osCreatedAt}}",
      "credentialSubject": {
        "type": "Nurse",
        "id": "did:healthflow:nurse:{{nursingLicenseNumber}}",
        "name": "{{fullName}}",
        "nursingLicenseNumber": "{{nursingLicenseNumber}}",
        "nursingCategory": "{{nursingCategory}}",
        "specialization": "{{specialization}}"
      }
    }
  }
}
